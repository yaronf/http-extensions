<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Retrofit Structured Fields for HTTP</title>
<meta content="Mark Nottingham" name="author">
<meta content="
       This specification nominates a selection of existing HTTP fields as having syntax that is compatible with Structured Fields, so that they can be handled as such (subject to certain caveats). 
       To accommodate some additional fields whose syntax is not compatible, it also defines mappings of their semantics into new Structured Fields. It does not specify how to negotiate their use. 
       One of those mappings requires introduction of a new Structured Fields data type, Date. 
    " name="description">
<meta content="xml2rfc 3.15.2" name="generator">
<meta content="structured fields" name="keyword">
<meta content="http" name="keyword">
<meta content="draft-ietf-httpbis-retrofit-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.15.2
    Python 3.10.5
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.2
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.1
    MarkupSafe 2.1.1
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.4.0
    six 1.16.0
    wcwidth 0.2.5
-->
<link href="draft-ietf-httpbis-retrofit.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl > dt {
  float: left;
  margin-right: 1em;
  min-width: 12ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
dl .break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: 14.5px;
}
.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 8em !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([stroke="fill"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Retrofit Structured Fields</td>
<td class="right">November 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Nottingham</td>
<td class="center">Expires 13 May 2023</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-httpbis-retrofit-latest</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc8941" class="eref">8941</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-11-09" class="published">9 November 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2023-05-13">13 May 2023</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Nottingham</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Retrofit Structured Fields for HTTP</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This specification nominates a selection of existing HTTP fields as having syntax that is compatible with Structured Fields, so that they can be handled as such (subject to certain caveats).<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">To accommodate some additional fields whose syntax is not compatible, it also defines mappings of their semantics into new Structured Fields. It does not specify how to negotiate their use.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">One of those mappings requires introduction of a new Structured Fields data type, Date.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-ietf-httpbis-retrofit/">https://datatracker.ietf.org/doc/draft-ietf-httpbis-retrofit/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        HTTP Working Group mailing list (<span><a href="mailto:ietf-http-wg@w3.org">mailto:ietf-http-wg@w3.org</a></span>),
        which is archived at <span><a href="https://lists.w3.org/Archives/Public/ietf-http-wg/">https://lists.w3.org/Archives/Public/ietf-http-wg/</a></span>.
        Working Group information can be found at <span><a href="https://httpwg.org/">https://httpwg.org/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/httpwg/http-extensions/labels/retrofit">https://github.com/httpwg/http-extensions/labels/retrofit</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 13 May 2023.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-notational-conventions" class="internal xref">Notational Conventions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-compatible-fields" class="internal xref">Compatible Fields</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-mapped-fields" class="internal xref">Mapped Fields</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-urls" class="internal xref">URLs</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-dates" class="internal xref">Dates</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-etags" class="internal xref">ETags</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-links" class="internal xref">Links</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="auto internal xref">3.5</a>.  <a href="#name-cookies" class="internal xref">Cookies</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-the-date-structured-type" class="internal xref">The Date Structured Type</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-serialising-a-date" class="internal xref">Serialising a Date</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-parsing-a-date" class="internal xref">Parsing a Date</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Structured Field Values for HTTP <span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span> introduced a data model with associated parsing and serialization algorithms for use by new HTTP field values. Fields that are defined as Structured Fields can realise a number of benefits, including:<a href="#section-1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-2.1">Improved interoperability and security: precisely defined parsing and serialisation algorithms are typically not available for fields defined with just ABNF and/or prose.<a href="#section-1-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-2.2">Reuse of common implementations: many parsers for other fields are specific to a single field or a small family of fields.<a href="#section-1-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-2.3">Canonical form: because a deterministic serialisation algorithm is defined for each type, Structure Fields have a canonical representation.<a href="#section-1-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-2.4">Enhanced API support: a regular data model makes it easier to expose field values as a native data structure in implementations.<a href="#section-1-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-2.5">Alternative serialisations: While <span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span> defines a textual serialisation of that data model, other, more efficient serialisations of the underlying data model are also possible.<a href="#section-1-2.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-1-3">However, a field needs to be defined as a Structured Field for these benefits to be realised. Many existing fields are not, making up the bulk of header and trailer fields seen in HTTP traffic on the internet.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">This specification defines how a selection of existing HTTP fields can be handled as Structured Fields, so that these benefits can be realised -- thereby making them Retrofit Structured Fields.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">It does so using two techniques. <a href="#compatible" class="auto internal xref">Section 2</a> lists compatible fields -- those that can be handled as if they were Structured Fields due to the similarity of their defined syntax to that in Structured Fields. <a href="#mapped" class="auto internal xref">Section 3</a> lists mapped fields -- those whose syntax needs to be transformed into an underlying data model which is then mapped into that defined by Structured Fields.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">Note that while implementations can parse and serialise compatible fields as Structured Fields subject to the caveats in <a href="#compatible" class="auto internal xref">Section 2</a>, a sender cannot generate mapped fields from <a href="#mapped" class="auto internal xref">Section 3</a> and expect them to be understood and acted upon by the recipient without prior negotiation. This specification does not define such a mechanism.<a href="#section-1-6" class="pilcrow">¶</a></p>
<div id="notational-conventions">
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">This document uses the date-time, time-offset, and time-secfrac rules from <span>[<a href="#RFC3339" class="cite xref">RFC3339</a>]</span>.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="compatible">
<section id="section-2">
      <h2 id="name-compatible-fields">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-compatible-fields" class="section-name selfRef">Compatible Fields</a>
      </h2>
<p id="section-2-1">The HTTP fields listed in <a href="#compatible-fields" class="auto internal xref">Table 1</a> can usually have their values handled as Structured Fields according to the listed parsing and serialisation algorithms in <span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>, subject to the listed caveats.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The listed types are chosen for compatibility with the defined syntax of the field as well as with actual internet traffic. However, not all instances of these fields will successfully parse. This might be because the field value is clearly invalid, or it might be because it is valid but not parseable as a Structured Field.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">An application using this specification will need to consider how to handle such field values. Depending on its requirements, it might be advisable to reject such values, treat them as opaque strings, or attempt to recover a structured value from them in an ad hoc fashion.<a href="#section-2-3" class="pilcrow">¶</a></p>
<span id="name-compatible-fields-2"></span><div id="compatible-fields">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-compatible-fields-2" class="selfRef">Compatible Fields</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Field Name</th>
            <th class="text-left" rowspan="1" colspan="1">Structured Type</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Accept</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Accept-Encoding</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Accept-Language</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Accept-Patch</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Accept-Post</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Accept-Ranges</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Access-Control-Allow-Credentials</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Access-Control-Allow-Headers</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Access-Control-Allow-Methods</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Access-Control-Allow-Origin</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Access-Control-Expose-Headers</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Access-Control-Max-Age</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Access-Control-Request-Headers</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Access-Control-Request-Method</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Age</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Allow</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ALPN</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Alt-Svc</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Alt-Used</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Cache-Control</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">CDN-Loop</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Clear-Site-Data</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Connection</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Content-Encoding</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Content-Language</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Content-Length</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Content-Type</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Cross-Origin-Resource-Policy</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">DNT</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Expect</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Expect-CT</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Host</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Keep-Alive</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Max-Forwards</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Origin</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Pragma</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Prefer</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Preference-Applied</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Retry-After</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Sec-WebSocket-Extensions</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Sec-WebSocket-Protocol</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Sec-WebSocket-Version</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Server-Timing</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Surrogate-Control</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">TE</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Timing-Allow-Origin</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Trailer</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Transfer-Encoding</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Upgrade-Insecure-Requests</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Vary</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">X-Content-Type-Options</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">X-Frame-Options</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">X-XSS-Protection</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-2-5">Note the following caveats regarding compatibility:<a href="#section-2-5" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-6">
        <dt id="section-2-6.1">Parameter and Dictionary keys:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.2">
          <p id="section-2-6.2.1">HTTP parameter names are case-insensitive (per <span><a href="https://rfc-editor.org/rfc/rfc9110#section-5.6.6" class="relref">Section 5.6.6</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>), but Structured Fields require them to be all-lowercase. Although the vast majority of parameters seen in typical traffic are all-lowercase, compatibility can be improved by force-lowercasing parameters when parsing.
Likewise, many Dictionary-based fields (e.g., Cache-Control, Expect-CT, Pragma, Prefer, Preference-Applied, Surrogate-Control) have case-insensitive keys, and compatibility can be improved by force-lowercasing them when parsing.<a href="#section-2-6.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.3">Parameter delimitation:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.4">
          <p id="section-2-6.4.1">The parameters rule in HTTP (see <span><a href="https://rfc-editor.org/rfc/rfc9110#section-5.6.6" class="relref">Section 5.6.6</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span>) allows whitespace before the ";" delimiter, but Structured Fields does not. Compatibility can be improved by allowing such whitespace when parsing.<a href="#section-2-6.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.5">String quoting:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.6">
          <p id="section-2-6.6.1"><span><a href="https://rfc-editor.org/rfc/rfc9110#section-5.6.4" class="relref">Section 5.6.4</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span> allows backslash-escaping most characters in quoted strings, whereas Structured Field Strings only escape "\" and DQUOTE. Compatibility can be improved by unescaping other characters before parsing.<a href="#section-2-6.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.7">Token limitations:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.8">
          <p id="section-2-6.8.1">In Structured Fields, tokens are required to begin with an alphabetic character or "*", whereas HTTP tokens allow a wider range of characters. This prevents use of mapped values that begin with one of these characters. For example, media types, field names, methods, range-units, character and transfer codings that begin with a number or special character other than "*" might be valid HTTP protocol elements, but will not be able to be represented as Structured Field Tokens.<a href="#section-2-6.8.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.9">Integer limitations:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.10">
          <p id="section-2-6.10.1">Structured Fields Integers can have at most 15 digits; larger values will not be able to be represented in them.<a href="#section-2-6.10.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.11">IPv6 Literals:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.12">
          <p id="section-2-6.12.1">Fields whose values contain IPv6 literal addresses (such as CDN-Loop, Host, and Origin) are not able to be represented as Structured Fields Tokens, because the brackets used to delimit them are not allowed in Tokens.<a href="#section-2-6.12.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.13">Empty Field Values:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.14">
          <p id="section-2-6.14.1">Empty and whitespace-only field values are considered errors in Structured Fields. For compatible fields, an empty field indicates that the field should be silently ignored.<a href="#section-2-6.14.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.15">Alt-Svc:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.16">
          <p id="section-2-6.16.1">Some ALPN tokens (e.g., <code>h3-Q43</code>) do not conform to key's syntax, and therefore cannot be represented as a Token. Since the final version of HTTP/3 uses the <code>h3</code> token, this shouldn't be a long-term issue, although future tokens may again violate this assumption.<a href="#section-2-6.16.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.17">Content-Length:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.18">
          <p id="section-2-6.18.1">Note that Content-Length is defined as a List because it is not uncommon for implementations to mistakenly send multiple values. See <span><a href="https://rfc-editor.org/rfc/rfc9110#section-8.6" class="relref">Section 8.6</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span> for handling requirements.<a href="#section-2-6.18.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-2-6.19">Retry-After:</dt>
        <dd style="margin-left: 1.5em" id="section-2-6.20">
          <p id="section-2-6.20.1">Only the delta-seconds form of Retry-After can be represented; a Retry-After value containing a http-date will need to be converted into delta-seconds to be conveyed as a Structured Field Value.<a href="#section-2-6.20.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="mapped">
<section id="section-3">
      <h2 id="name-mapped-fields">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-mapped-fields" class="section-name selfRef">Mapped Fields</a>
      </h2>
<p id="section-3-1">Some HTTP field values have syntax that cannot be successfully parsed as Structured Fields. Instead, it is necessary to map them into a separate Structured Field with an alternative name.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">For example, the Date HTTP header field carries a date:<a href="#section-3-2" class="pilcrow">¶</a></p>
<div id="section-3-3">
<pre class="lang-http-message sourcecode">
Date: Sun, 06 Nov 1994 08:49:37 GMT
</pre><a href="#section-3-3" class="pilcrow">¶</a>
</div>
<p id="section-3-4">Its value would be mapped to:<a href="#section-3-4" class="pilcrow">¶</a></p>
<div id="section-3-5">
<pre class="lang-http-message-new sourcecode">
SF-Date: @784111777
</pre><a href="#section-3-5" class="pilcrow">¶</a>
</div>
<p id="section-3-6">As in <a href="#compatible" class="auto internal xref">Section 2</a>, these fields are unable to carry values that are not valid Structured Fields, and so an application using this specification will need to how to support such values. Typically, handling them using the original field name is sufficient.<a href="#section-3-6" class="pilcrow">¶</a></p>
<p id="section-3-7">Each field name listed below indicates a replacement field name and a means of mapping its original value into a Structured Field.<a href="#section-3-7" class="pilcrow">¶</a></p>
<div id="urls">
<section id="section-3.1">
        <h3 id="name-urls">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-urls" class="section-name selfRef">URLs</a>
        </h3>
<p id="section-3.1-1">The field names in <a href="#url-fields" class="auto internal xref">Table 2</a> (paired with their mapped field names) have values that can be mapped into Structured Fields by treating the original field's value as a String.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<span id="name-url-fields"></span><div id="url-fields">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-url-fields" class="selfRef">URL Fields</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Field Name</th>
              <th class="text-left" rowspan="1" colspan="1">Mapped Field Name</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Content-Location</td>
              <td class="text-left" rowspan="1" colspan="1">SF-Content-Location</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Location</td>
              <td class="text-left" rowspan="1" colspan="1">SF-Location</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Referer</td>
              <td class="text-left" rowspan="1" colspan="1">SF-Referer</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-3.1-3">For example, this Location field<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<div id="section-3.1-4">
<pre class="lang-http-message sourcecode">
Location: https://example.com/foo
</pre><a href="#section-3.1-4" class="pilcrow">¶</a>
</div>
<p id="section-3.1-5">could be mapped as:<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<div id="section-3.1-6">
<pre class="lang-http-message sourcecode">
SF-Location: "https://example.com/foo"
</pre><a href="#section-3.1-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="dates">
<section id="section-3.2">
        <h3 id="name-dates">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-dates" class="section-name selfRef">Dates</a>
        </h3>
<p id="section-3.2-1">The field names in <a href="#date-fields" class="auto internal xref">Table 3</a> (paired with their mapped field names) have values that can be mapped into Structured Fields by parsing their payload according to <span><a href="https://rfc-editor.org/rfc/rfc9110#section-5.6.7" class="relref">Section 5.6.7</a> of [<a href="#HTTP" class="cite xref">HTTP</a>]</span> and representing the result as an Integer number of seconds delta from the Unix Epoch (00:00:00 UTC on 1 January 1970, excluding leap seconds), using the Date Structured Fields data type defined in <a href="#date-type" class="auto internal xref">Appendix A</a>.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<span id="name-date-fields"></span><div id="date-fields">
<table class="center" id="table-3">
          <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-date-fields" class="selfRef">Date Fields</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Field Name</th>
              <th class="text-left" rowspan="1" colspan="1">Mapped Field Name</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Date</td>
              <td class="text-left" rowspan="1" colspan="1">SF-Date</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Expires</td>
              <td class="text-left" rowspan="1" colspan="1">SF-Expires</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">If-Modified-Since</td>
              <td class="text-left" rowspan="1" colspan="1">SF-If-Modified-Since</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">If-Unmodified-Since</td>
              <td class="text-left" rowspan="1" colspan="1">SF-If-Unmodified-Since</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Last-Modified</td>
              <td class="text-left" rowspan="1" colspan="1">SF-Last-Modified</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-3.2-3">For example, an Expires field could be mapped as:<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<div id="section-3.2-4">
<pre class="lang-http-message-new sourcecode">
SF-Expires: @1659578233
</pre><a href="#section-3.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="etags">
<section id="section-3.3">
        <h3 id="name-etags">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-etags" class="section-name selfRef">ETags</a>
        </h3>
<p id="section-3.3-1">The field value of the ETag header field can be mapped into the SF-ETag Structured Field by representing the entity-tag as a String, and the weakness flag as a Boolean "w" parameter on it, where true indicates that the entity-tag is weak; if 0 or unset, the entity-tag is strong.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">For example, this:<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<div id="section-3.3-3">
<pre class="lang-http-message sourcecode">
ETag: W/"abcdef"
</pre><a href="#section-3.3-3" class="pilcrow">¶</a>
</div>
<div id="section-3.3-4">
<pre class="lang-http-message sourcecode">
SF-ETag: "abcdef"; w
</pre><a href="#section-3.3-4" class="pilcrow">¶</a>
</div>
<p id="section-3.3-5">If-None-Match's field value can be mapped into the SF-If-None-Match Structured Field, which is a List of the structure described above. When a field value contains "*", it is represented as a Token.<a href="#section-3.3-5" class="pilcrow">¶</a></p>
<p id="section-3.3-6">Likewise, If-Match's field value can be mapped into the SF-If-Match Structured Field in the same manner.<a href="#section-3.3-6" class="pilcrow">¶</a></p>
<p id="section-3.3-7">For example:<a href="#section-3.3-7" class="pilcrow">¶</a></p>
<div id="section-3.3-8">
<pre class="lang-http-message sourcecode">
SF-If-None-Match: "abcdef"; w, "ghijkl", *
</pre><a href="#section-3.3-8" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="links">
<section id="section-3.4">
        <h3 id="name-links">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-links" class="section-name selfRef">Links</a>
        </h3>
<p id="section-3.4-1">The field value of the Link header field <span>[<a href="#RFC8288" class="cite xref">RFC8288</a>]</span> can be mapped into the SF-Link List Structured Field by considering the URI-Reference as a String, and link-param as Parameters.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">For example, this:<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<div id="section-3.4-3">
<pre class="lang-http-message sourcecode">
Link: &lt;/terms&gt;; rel="copyright"; anchor="#foo"
</pre><a href="#section-3.4-3" class="pilcrow">¶</a>
</div>
<p id="section-3.4-4">can be mapped to:<a href="#section-3.4-4" class="pilcrow">¶</a></p>
<div id="section-3.4-5">
<pre class="lang-http-message sourcecode">
SF-Link: "/terms"; rel="copyright"; anchor="#foo"
</pre><a href="#section-3.4-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="cookies">
<section id="section-3.5">
        <h3 id="name-cookies">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-cookies" class="section-name selfRef">Cookies</a>
        </h3>
<p id="section-3.5-1">The field values of the Cookie and Set-Cookie fields <span>[<a href="#COOKIES" class="cite xref">COOKIES</a>]</span> can be mapped into the SF-Cookie Structured Field (a List) and SF-Set-Cookie Structured Field (a List), respectively.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">In each case, a cookie is represented as an Inner List containing two Items; the cookie name and value. The cookie name is always a String; the cookie value is a String, unless it can be successfully parsed as the textual representation of another, bare Item structured type (e.g., Byte Sequence, Decimal, Integer, Token, or Boolean).<a href="#section-3.5-2" class="pilcrow">¶</a></p>
<p id="section-3.5-3">Cookie attributes map to Parameters on the Inner List, with the parameter name being forced to lowercase. Cookie attribute values are Strings unless a specific type is defined for them. This specification defines types for existing cookie attributes in <a href="#cookie-params" class="auto internal xref">Table 4</a>.<a href="#section-3.5-3" class="pilcrow">¶</a></p>
<span id="name-set-cookie-parameter-types"></span><div id="cookie-params">
<table class="center" id="table-4">
          <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-set-cookie-parameter-types" class="selfRef">Set-Cookie Parameter Types</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Parameter Name</th>
              <th class="text-left" rowspan="1" colspan="1">Structured Type</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Domain</td>
              <td class="text-left" rowspan="1" colspan="1">String</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">HttpOnly</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Expires</td>
              <td class="text-left" rowspan="1" colspan="1">Date</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Max-Age</td>
              <td class="text-left" rowspan="1" colspan="1">Integer</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Path</td>
              <td class="text-left" rowspan="1" colspan="1">String</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Secure</td>
              <td class="text-left" rowspan="1" colspan="1">Boolean</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SameSite</td>
              <td class="text-left" rowspan="1" colspan="1">Token</td>
            </tr>
          </tbody>
        </table>
</div>
<p id="section-3.5-5">The Expires attribute is mapped to a Date representation of parsed-cookie-date (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-11#section-5.1.1" class="relref">Section 5.1.1</a> of [<a href="#COOKIES" class="cite xref">COOKIES</a>]</span>).<a href="#section-3.5-5" class="pilcrow">¶</a></p>
<p id="section-3.5-6">For example, these unstructured fields:<a href="#section-3.5-6" class="pilcrow">¶</a></p>
<div id="section-3.5-7">
<pre class="lang-http-message sourcecode">
Set-Cookie: lang=en-US; Expires=Wed, 09 Jun 2021 10:18:14 GMT;
               samesite=Strict; secure
Cookie: SID=31d4d96e407aad42; lang=en-US
</pre><a href="#section-3.5-7" class="pilcrow">¶</a>
</div>
<p id="section-3.5-8">can be mapped into:<a href="#section-3.5-8" class="pilcrow">¶</a></p>
<div id="section-3.5-9">
<pre class="lang-http-message-new sourcecode">
SF-Set-Cookie: ("lang" "en-US"); expires=@1623233894;
               samesite=Strict; secure
SF-Cookie: ("SID" "31d4d96e407aad42"), ("lang" "en-US")
</pre><a href="#section-3.5-9" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-4">
      <h2 id="name-iana-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-4-1">Please add the following note to the "Hypertext Transfer Protocol (HTTP) Field Name Registry":<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-4-2.1">
          <p id="section-4-2.1.1">The "Structured Type" column indicates the type of the field (per RFC8941), if any, and may be
"Dictionary", "List" or "Item". A prefix of "*" indicates that it is a retrofit type (i.e., not
natively Structured); see [this specification].<a href="#section-4-2.1.1" class="pilcrow">¶</a></p>
<p id="section-4-2.1.2">Note that field names beginning with characters other than ALPHA or "*" will not be able to be
represented as a Structured Fields Token, and therefore may be incompatible with being mapped into
fields that refer to it; see [this specification].<a href="#section-4-2.1.2" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-4-3">Then, add a new column, "Structured Type", with the values from <a href="#compatible" class="auto internal xref">Section 2</a> assigned to the nominated registrations, prefixing each with "*" to indicate that it is a retrofit type.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">Then, add the field names in <a href="#new-fields" class="auto internal xref">Table 5</a>, with the corresponding Structured Type as indicated, a status of "permanent" and referring to this document.<a href="#section-4-4" class="pilcrow">¶</a></p>
<span id="name-new-fields"></span><div id="new-fields">
<table class="center" id="table-5">
        <caption>
<a href="#table-5" class="selfRef">Table 5</a>:
<a href="#name-new-fields" class="selfRef">New Fields</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Field Name</th>
            <th class="text-left" rowspan="1" colspan="1">Structured Type</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Content-Location</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Cookie</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Date</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-ETag</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Expires</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-If-Match</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-If-Modified-Since</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-If-None-Match</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-If-Unmodified-Since</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Link</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Last-Modified</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Location</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Referer</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SF-Set-Cookie</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-4-6">Then, add the indicated Structured Type for each existing registry entry listed in <a href="#existing-fields" class="auto internal xref">Table 6</a>.<a href="#section-4-6" class="pilcrow">¶</a></p>
<span id="name-existing-fields"></span><div id="existing-fields">
<table class="center" id="table-6">
        <caption>
<a href="#table-6" class="selfRef">Table 6</a>:
<a href="#name-existing-fields" class="selfRef">Existing Fields</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Field Name</th>
            <th class="text-left" rowspan="1" colspan="1">Structured Type</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Accept-CH</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Cache-Status</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">CDN-Cache-Control</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Cross-Origin-Embedder-Policy</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Cross-Origin-Embedder-Policy-Report-Only</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Cross-Origin-Opener-Policy</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Cross-Origin-Opener-Policy-Report-Only</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Origin-Agent-Cluster</td>
            <td class="text-left" rowspan="1" colspan="1">Item</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Priority</td>
            <td class="text-left" rowspan="1" colspan="1">Dictionary</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Proxy-Status</td>
            <td class="text-left" rowspan="1" colspan="1">List</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-4-8">Finally, add a new column to the "Cookie Attribute Registry" established by <span>[<a href="#COOKIES" class="cite xref">COOKIES</a>]</span> with the title "Structured Type", using information from <a href="#cookie-params" class="auto internal xref">Table 4</a>.<a href="#section-4-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-5-1"><a href="#compatible" class="auto internal xref">Section 2</a> identifies existing HTTP fields that can be parsed and serialised with the algorithms defined in <span>[<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>. Variances from existing parser behavior might be exploitable, particularly if they allow an attacker to target one implementation in a chain (e.g., an intermediary). However, given the considerable variance in parsers already deployed, convergence towards a single parsing algorithm is likely to have a net security benefit in the longer term.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2"><a href="#mapped" class="auto internal xref">Section 3</a> defines alternative representations of existing fields. Because downstream consumers might interpret the message differently based upon whether they recognise the alternative representation, implementations are prohibited from generating such fields unless they have negotiated support for them with their peer. This specification does not define such a mechanism, but any such definition needs to consider the implications of doing so carefully.<a href="#section-5-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-6">
      <h2 id="name-normative-references">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="COOKIES">[COOKIES]</dt>
      <dd>
<span class="refAuthor">Bingler, S.</span>, <span class="refAuthor">West, M.</span>, and <span class="refAuthor">J. Wilander</span>, <span class="refTitle">"Cookies: HTTP State Management Mechanism"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-rfc6265bis-11</span>, <time datetime="2022-11-07" class="refDate">7 November 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-11">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-rfc6265bis-11</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HTTP">[HTTP]</dt>
      <dd>
<span class="refAuthor">Fielding, R., Ed.</span>, <span class="refAuthor">Nottingham, M., Ed.</span>, and <span class="refAuthor">J. Reschke, Ed.</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="seriesInfo">STD 97</span>, <span class="seriesInfo">RFC 9110</span>, <span class="seriesInfo">DOI 10.17487/RFC9110</span>, <time datetime="2022-06" class="refDate">June 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9110">https://www.rfc-editor.org/rfc/rfc9110</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3339">[RFC3339]</dt>
      <dd>
<span class="refAuthor">Klyne, G.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"Date and Time on the Internet: Timestamps"</span>, <span class="seriesInfo">RFC 3339</span>, <span class="seriesInfo">DOI 10.17487/RFC3339</span>, <time datetime="2002-07" class="refDate">July 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3339">https://www.rfc-editor.org/rfc/rfc3339</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8288">[RFC8288]</dt>
      <dd>
<span class="refAuthor">Nottingham, M.</span>, <span class="refTitle">"Web Linking"</span>, <span class="seriesInfo">RFC 8288</span>, <span class="seriesInfo">DOI 10.17487/RFC8288</span>, <time datetime="2017-10" class="refDate">October 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8288">https://www.rfc-editor.org/rfc/rfc8288</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="STRUCTURED-FIELDS">[STRUCTURED-FIELDS]</dt>
    <dd>
<span class="refAuthor">Nottingham, M.</span> and <span class="refAuthor">P-H. Kamp</span>, <span class="refTitle">"Structured Field Values for HTTP"</span>, <span class="seriesInfo">RFC 8941</span>, <span class="seriesInfo">DOI 10.17487/RFC8941</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8941">https://www.rfc-editor.org/rfc/rfc8941</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="date-type">
<section id="appendix-A">
      <h2 id="name-the-date-structured-type">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-the-date-structured-type" class="section-name selfRef">The Date Structured Type</a>
      </h2>
<p id="appendix-A-1">This section defines a new Structured Fields data type, Date.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">Dates have a data model that is similar to Integers, representing a (possibly negative) delta in seconds from January 1, 1970 00:00:00 UTC, excluding leap seconds.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">The ABNF for Dates is:<a href="#appendix-A-3" class="pilcrow">¶</a></p>
<div id="appendix-A-4">
<pre class="lang-abnf sourcecode">
sf-date = "@" ["-"] 1*15DIGIT
</pre><a href="#appendix-A-4" class="pilcrow">¶</a>
</div>
<p id="appendix-A-5">For example:<a href="#appendix-A-5" class="pilcrow">¶</a></p>
<div id="appendix-A-6">
<pre class="lang-http-message-new sourcecode">
Example-Date: @1659578233
</pre><a href="#appendix-A-6" class="pilcrow">¶</a>
</div>
<div id="serialising-a-date">
<section id="appendix-A.1">
        <h3 id="name-serialising-a-date">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-serialising-a-date" class="section-name selfRef">Serialising a Date</a>
        </h3>
<p id="appendix-A.1-1">Given a Date as input_integer, return an ASCII string suitable for use in an HTTP field value.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="appendix-A.1-2">
<li id="appendix-A.1-2.1">Let output be "@".<a href="#appendix-A.1-2.1" class="pilcrow">¶</a>
</li>
          <li id="appendix-A.1-2.2">Append to output the result of running Serializing an Integer with input_date (see <span><a href="https://rfc-editor.org/rfc/rfc8941#section-4.1.4" class="relref">Section 4.1.4</a> of [<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>).<a href="#appendix-A.1-2.2" class="pilcrow">¶</a>
</li>
          <li id="appendix-A.1-2.3">Return output.<a href="#appendix-A.1-2.3" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
<div id="parsing-a-date">
<section id="appendix-A.2">
        <h3 id="name-parsing-a-date">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-parsing-a-date" class="section-name selfRef">Parsing a Date</a>
        </h3>
<p id="appendix-A.2-1">Given an ASCII string as input_string, return a Date. input_string is modified to remove the parsed value.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="appendix-A.2-2">
<li id="appendix-A.2-2.1">If the first character of input_string is not "@", fail parsing.<a href="#appendix-A.2-2.1" class="pilcrow">¶</a>
</li>
          <li id="appendix-A.2-2.2">Discard the first character of input_string.<a href="#appendix-A.2-2.2" class="pilcrow">¶</a>
</li>
          <li id="appendix-A.2-2.3">Let output_date be the result of running Parsing an Integer or Decimal with input_string (see <span><a href="https://rfc-editor.org/rfc/rfc8941#section-4.2.4" class="relref">Section 4.2.4</a> of [<a href="#STRUCTURED-FIELDS" class="cite xref">STRUCTURED-FIELDS</a>]</span>).<a href="#appendix-A.2-2.3" class="pilcrow">¶</a>
</li>
          <li id="appendix-A.2-2.4">If output_date is a Decimal, fail parsing.<a href="#appendix-A.2-2.4" class="pilcrow">¶</a>
</li>
          <li id="appendix-A.2-2.5">Return output_date.<a href="#appendix-A.2-2.5" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mark Nottingham</span></div>
<div dir="auto" class="left"><span class="street-address">Prahran</span></div>
<div dir="auto" class="left"><span class="country-name">Australia</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mnot@mnot.net" class="email">mnot@mnot.net</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://www.mnot.net/" class="url">https://www.mnot.net/</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
